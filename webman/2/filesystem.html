<!DOCTYPE html>

<link rel="stylesheet" href="https://oz-craft.pickardayune.com/blog/style.css">

<html>
  <title>filesystem(2)</title>
  ULOS Manual Pages - filesystem(2) | <a href="../2">Back</a><br><br>
  <body>
    <span style='color:#FFF;font-weight:bold;'>NAME</span><br>&nbsp&nbspfilesystem - filesystem API<br><br><span style='color:#FFF;font-weight:bold;'>DESCRIPTION</span><br>&nbsp&nbsp<span style='color:#0AA;font-weight:italic;'>filesystem</span> is the Cynosure-provided method of accessing any filesystem mounted to the filesystem tree.&nbsp&nbspIt is similar in design to <span style='color:#0AA;font-weight:italic;'>lfs</span>, though it is not exactly the same.&nbsp&nbspSome filesystem information can be had from the sysfs.<br><br>&nbsp&nbspAll functions will return <span style='color:#F5F;font-weight:bold;'>nil</span> and an error message on failure.&nbsp&nbspAll file paths must be absolute - see <span style='color:#FFF;font-weight:bold;'>path</span>(<span style='color:#FFF;font-weight:bold;'>3</span>) for some helper functions related to path manipulation in general.<br><br><span style='color:#FFF;font-weight:bold;'>FUNCTIONS</span><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>open</span>(<span style='color:#FFF;font-weight:bold;'>file</span>:<span style='color:#F00;font-weight:bold;'>string</span>[, <span style='color:#FFF;font-weight:bold;'>mode</span>:<span style='color:#F00;font-weight:bold;'>string</span>]): <span style='color:#0F0;font-weight:bold;'>table</span><br>&nbsp&nbsp&nbsp&nbspAttempts to open the provided <span style='color:#F00;font-weight:bold;'>file</span> using <span style='color:#F00;font-weight:bold;'>mode</span>.&nbsp&nbspOn success, returns a table with <span style='color:#55F;font-weight:bold;'>read</span>, <span style='color:#55F;font-weight:bold;'>write</span>, <span style='color:#55F;font-weight:bold;'>seek</span>, and <span style='color:#55F;font-weight:bold;'>close</span> methods.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>stat</span>(<span style='color:#FFF;font-weight:bold;'>file</span>:<span style='color:#F00;font-weight:bold;'>string</span>): <span style='color:#0F0;font-weight:bold;'>table</span><br>&nbsp&nbsp&nbsp&nbspReturns a table of information about the provided file:<br><br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#0F0;font-weight:bold;'>{</span><br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>permissions</span>&nbsp&nbsp= <span style='color:#F5F;font-weight:bold;'>number</span>,<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>type</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp = <span style='color:#F5F;font-weight:bold;'>number</span>,<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>isDirectory</span>&nbsp&nbsp= <span style='color:#F5F;font-weight:bold;'>boolean</span>,<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>owner</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= <span style='color:#F5F;font-weight:bold;'>number</span>,<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>group</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= <span style='color:#F5F;font-weight:bold;'>number</span>,<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>lastModified</span> = <span style='color:#F5F;font-weight:bold;'>number</span>,<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>size</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp = <span style='color:#F5F;font-weight:bold;'>number</span><br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#0F0;font-weight:bold;'>}</span><br><br>&nbsp&nbsp&nbsp&nbsp<span style='color:#F5F;font-weight:bold;'>isDirectory</span> is primarily kept for convenience's sake and some degree of backwards compatibility.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>touch</span>(<span style='color:#FFF;font-weight:bold;'>file</span>:<span style='color:#F00;font-weight:bold;'>string</span>[, <span style='color:#FFF;font-weight:bold;'>ftype</span>:<span style='color:#F5F;font-weight:bold;'>number</span>]): <span style='color:#F5F;font-weight:bold;'>boolean</span><br>&nbsp&nbsp&nbsp&nbspCreates the provided <span style='color:#F00;font-weight:bold;'>file</span>, if it does not exist.&nbsp&nbspIf <span style='color:#F5F;font-weight:bold;'>ftype</span> is specified, the file will be of the specified type if supported by the filesystem.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>list</span>(<span style='color:#FFF;font-weight:bold;'>path</span>:<span style='color:#F00;font-weight:bold;'>string</span>): <span style='color:#0F0;font-weight:bold;'>table</span><br>&nbsp&nbsp&nbsp&nbspReturns a list of all files under the specified <span style='color:#F00;font-weight:bold;'>path</span>.<br>&nbsp&nbsp<br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>remove</span>(<span style='color:#FFF;font-weight:bold;'>file</span>:<span style='color:#F00;font-weight:bold;'>string</span>): <span style='color:#F5F;font-weight:bold;'>boolean</span><br>&nbsp&nbsp&nbsp&nbspTries to remove the specified <span style='color:#F00;font-weight:bold;'>file</span> from the filesystem.&nbsp&nbspWill not be able to remove directories on most filesystems.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>mount</span>(<span style='color:#FFF;font-weight:bold;'>node</span>:<span style='color:#F00;font-weight:bold;'>string</span> or <span style='color:#0F0;font-weight:bold;'>table</span>, <span style='color:#FFF;font-weight:bold;'>fstype</span>:<span style='color:#F5F;font-weight:bold;'>number</span>, <span style='color:#FFF;font-weight:bold;'>path</span>:<span style='color:#F00;font-weight:bold;'>string</span>): <span style='color:#F5F;font-weight:bold;'>boolean</span><br>&nbsp&nbsp&nbsp&nbspMounts the provided <span style='color:#FF0;font-weight:bold;'>node</span> at <span style='color:#F00;font-weight:bold;'>path</span>.<br><br>&nbsp&nbsp&nbsp&nbspIf <span style='color:#F5F;font-weight:bold;'>fstype</span> is <span style='color:#F5F;font-weight:bold;'>filesystem.types.RAW</span>, then <span style='color:#55F;font-weight:bold;'>mount</span> will try to automatically determine how it should tread <span style='color:#FF0;font-weight:bold;'>node</span>.&nbsp&nbspIf <span style='color:#F5F;font-weight:bold;'>fstype</span> is <span style='color:#F5F;font-weight:bold;'>filesystem.types.NODE</span>, <span style='color:#55F;font-weight:bold;'>mount</span> will treat it as a filesystem node able to be directly mounted - see <span style='color:#FF0;font-weight:bold;'>docs/fsapi.txt</span> for details.&nbsp&nbspFinally, if <span style='color:#F5F;font-weight:bold;'>fstype</span> is <span style='color:#F5F;font-weight:bold;'>filesystem.types.OVERLAY</span>, then the directory at <span style='color:#FF0;font-weight:bold;'>node</span> will become available at <span style='color:#F00;font-weight:bold;'>path</span>.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>umount</span>(<span style='color:#FFF;font-weight:bold;'>path</span>:<span style='color:#F00;font-weight:bold;'>string</span>): <span style='color:#F5F;font-weight:bold;'>boolean</span><br>&nbsp&nbsp&nbsp&nbspAttempts to remove the node at <span style='color:#FFF;font-weight:bold;'>path</span> from the filesystem mount tree.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>mounts</span>(): <span style='color:#0F0;font-weight:bold;'>table</span><br>&nbsp&nbsp&nbsp&nbspReturns a list of all currently mounted filesystems, in the following format:<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#0F0;font-weight:bold;'>{</span><br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp[<span style='color:#FFF;font-weight:bold;'>path</span>:<span style='color:#F00;font-weight:bold;'>string</span>] = <span style='color:#FFF;font-weight:bold;'>fsname</span>:<span style='color:#F00;font-weight:bold;'>string</span>,<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>...</span><br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span style='color:#0F0;font-weight:bold;'>}</span><br><br><span style='color:#FFF;font-weight:bold;'>TABLES</span><br>&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>filesystem.types</span> = <span style='color:#0F0;font-weight:bold;'>{</span><br>&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>RAW</span> = <span style='color:#F5F;font-weight:bold;'>number</span>,<br>&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>NODE</span> = <span style='color:#F5F;font-weight:bold;'>number</span>,<br>&nbsp&nbsp&nbsp&nbsp<span style='color:#FFF;font-weight:bold;'>OVERLAY</span> = <span style='color:#F5F;font-weight:bold;'>number</span><br>&nbsp&nbsp<span style='color:#0F0;font-weight:bold;'>}</span><br>&nbsp&nbsp&nbsp&nbspContains all supported filesystem types.<br><br><span style='color:#FFF;font-weight:bold;'>COPYRIGHT</span><br>&nbsp&nbspCynosure kernel copyright (c) 2021 Ocawesome101 under the DSLv2.<br><br><span style='color:#FFF;font-weight:bold;'>REPORTING BUGS</span><br>&nbsp&nbspBugs should be reported at <span style='color:#55F;font-weight:bold;'><a href='https://github.com/ocawesome101/oc-cynosure/issues'>https://github.com/ocawesome101/oc-cynosure/issues</a></span>.<br>
  </body>
</html>

