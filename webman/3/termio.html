<!DOCTYPE html>

<link rel="stylesheet" href="https://oz-craft.pickardayune.com/blog/style.css">

<html>
  <title>termio(3)</title>
  ULOS Manual Pages - termio(3) | <a href="../3">Back</a><br><br>
  <body>
    <span style='color:#FFF;font-weight:bold;'>NAME</span><br>&nbsp&nbsptermio - terminal-specific abstraction<br><br><span style='color:#FFF;font-weight:bold;'>DESCRIPTION</span><br>&nbsp&nbsp<span style='color:#0AA;font-weight:italic;'>termio</span> is a library created out of necessity.&nbsp&nbspIt is portable to many systems by the creation of a corresponding terminal-specific handler.<br><br>&nbsp&nbspNote that <span style='color:#0AA;font-weight:italic;'>termio</span> is only intended to simplify a few specific actions.&nbsp&nbspThese actions are getting terminal size and reading keyboard input.&nbsp&nbsp<span style='color:#0AA;font-weight:italic;'>termio</span> does not support terminals except those that follow the VT100 specification.<br><br><span style='color:#FFF;font-weight:bold;'>FUNCTIONS</span><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>setCursor</span>(<span style='color:#FFF;font-weight:bold;'>x</span>:<span style='color:#F5F;font-weight:bold;'>number</span>, <span style='color:#FFF;font-weight:bold;'>y</span>:<span style='color:#F5F;font-weight:bold;'>number</span>)<br>&nbsp&nbsp&nbsp&nbspSet the cursor position to (<span style='color:#F5F;font-weight:bold;'>x</span>,<span style='color:#F5F;font-weight:bold;'>y</span>).&nbsp&nbspEquivalent to <span style='color:#55F;font-weight:bold;'>io.write</span>(<span style='color:#F00;font-weight:bold;'>"\27[Y;XH"</span>).&nbsp&nbspIncluded for the sake of completeness and ease-of-use.&nbsp&nbspIf the input and output streams do not point to a TTY, this will do nothing.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>getCursor</span>(): <span style='color:#F5F;font-weight:bold;'>number</span>, <span style='color:#F5F;font-weight:bold;'>number</span><br>&nbsp&nbsp&nbsp&nbspGet the cursor position.&nbsp&nbspThis is not as easy to do as setting the cursor, requiring some terminal-specific commands.&nbsp&nbspThis, along with <span style='color:#55F;font-weight:bold;'>readKey</span>, is the reason for the usage of terminal handlers.<br><br>&nbsp&nbsp&nbsp&nbspIf the terminal is not recognized, or the input and output streams do not point to a TTY, then (<span style='color:#F5F;font-weight:bold;'>1</span>, <span style='color:#F5F;font-weight:bold;'>1</span>) will be returned.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>getTermSize</span>(): <span style='color:#F5F;font-weight:bold;'>number</span>, <span style='color:#F5F;font-weight:bold;'>number</span><br>&nbsp&nbsp&nbsp&nbspReturns the dimensions of the terminal.&nbsp&nbspIf the terminal is not recognized, or the input and output streams do not point to a TTY, then (<span style='color:#F5F;font-weight:bold;'>1</span>, <span style='color:#F5F;font-weight:bold;'>1</span>) will be returned.<br><br>&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>readKey</span>(): <span style='color:#F00;font-weight:bold;'>string</span>, <span style='color:#0F0;font-weight:bold;'>table</span><br>&nbsp&nbsp&nbsp&nbspReads one keypress from the standard input.&nbsp&nbspThe <span style='color:#0F0;font-weight:bold;'>table</span> contains two fields, <span style='color:#F5F;font-weight:bold;'>ctrl</span> and <span style='color:#F5F;font-weight:bold;'>alt</span>, both booleans, indicate whether the <span style='color:#FFF;font-weight:bold;'>Control</span> or <span style='color:#FFF;font-weight:bold;'>Alt</span> keys were pressed, respectively.&nbsp&nbspThe <span style='color:#F00;font-weight:bold;'>string</span> return is the key that was pressed.&nbsp&nbspUnless it is a key such as <span style='color:#FFF;font-weight:bold;'>Return</span>, <span style='color:#FFF;font-weight:bold;'>Backspace</span>, or <span style='color:#FFF;font-weight:bold;'>Delete</span>, it will be the character generated by the key press - so instead of <span style='color:#F00;font-weight:bold;'>"space"</span>, <span style='color:#55F;font-weight:bold;'>readKey</span> would return <span style='color:#F00;font-weight:bold;'>" "</span>.<br><br><span style='color:#FFF;font-weight:bold;'>TERMINAL HANDLERS</span><br>&nbsp&nbspTerminal handlers should be placed in <span style='color:#FF0;font-weight:bold;'>lib/termio/TERM.lua</span>, and must contain a library with the following functions:<br>&nbsp&nbsp&nbsp&nbsp<br>&nbsp&nbsp&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>ttyIn</span>(): <span style='color:#F5F;font-weight:bold;'>boolean</span><br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThis function should return whether the input stream points to a TTY.<br><br>&nbsp&nbsp&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>ttyOut</span>(): <span style='color:#F5F;font-weight:bold;'>boolean</span><br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThis function should return whether the output stream points to a TTY.<br><br>&nbsp&nbsp&nbsp&nbsp<span style='color:#55F;font-weight:bold;'>setRaw</span>(<span style='color:#FFF;font-weight:bold;'>raw</span>:<span style='color:#F5F;font-weight:bold;'>boolean</span>)<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspSet the terminal raw mode.&nbsp&nbspThis must do the following:<br><br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp- Enable or disable line buffering on at least the terminal input<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp- Enable or disable local echo<br><br><span style='color:#FFF;font-weight:bold;'>COPYRIGHT</span><br>&nbsp&nbspULOS Core Libraries copyright (c) 2021 Ocawesome101 under the DSLv2.<br><br><span style='color:#FFF;font-weight:bold;'>REPORTING BUGS</span><br>&nbsp&nbspBugs should be reported at <span style='color:#55F;font-weight:bold;'><a href='https://github.com/ocawesome101/oc-ulos/issues'>https://github.com/ocawesome101/oc-ulos/issues</a></span>.<br>
  </body>
</html>

